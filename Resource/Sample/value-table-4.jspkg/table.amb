top: VBox {
    table: TableView {
	hasHeader: Bool true
	isSelectable: Bool true
	fieldNames: Array [
		{field:"c0", title:"column 0"},
		{field:"c1", title:"column 1"},
		{field:"c2", title:"column 2"}
	]
	init: Init %{
                let storage = ValueStorage("storage") ;
	        if(storage == null){
		        console.log("Failed to allocate storage") ;
	        }
	        let table = ValueTable("root", storage) ;
	        if(table == null){
		        console.log("Failed to allocate table") ;
	        }
		// Set table into this view
                self.dataTable = table ;
		self.reload() ;
        %}
	filter: Event(record) %{
		console.log("filter: " + record.toString()) ;
		return true ;
	%}
	pressed: Event(row, col) %{
		console.log("row    = " + row + "/" + self.rowCount) ;
		console.log("column = " + col + "/" + self.columnCount) ;
	%}
    }
    buttons: HBox {
	rm_button: Button {
		title: String "Remove"
		isEnabled: Bool Listner(selected: top.table.didSelected) %{
			return selected ;
		%}
		pressed: Event() %{
			/*
			let recs = top.table.selectedRecords() ;
			console.log("selected recs: " + recs.length) ;
			for(rec of recs){
				console.log("rec: " + rec.toString()) ;
			}
			*/
			top.table.removeSelectedRows() ;
        	%}
    	}
	save_button: Button {
   		title: String "Save"
		pressed: Event() %{
			if(top.table.dataTable.save()){
				console.print("save ... done\n") ;
			} else {
				console.print("save ... failed\n") ;
			}
        	%}
    	}
	quit_button: Button {
   		title: String "Quit"
		pressed: Event() %{
			leaveView(1) ;
        	%}
    	}
    }
}

